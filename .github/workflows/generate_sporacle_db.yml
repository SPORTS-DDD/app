name: 'Generate Sporacle DB'

on:
  workflow_dispatch:
    

jobs:

  run_tests:
    runs-on: ubuntu-latest
    steps:
      - name: 'Git Checkout'
        uses: actions/checkout@v4
      - name: 'Setup Python'
        uses: actions/setup-python@v5
        with:
          python-version: '3.12'
      - name: Install OS dependencies'
        run: |
          sudo apt-get -y update && sudo apt-get -y upgrade \
          && sudo apt-get -y install \
              software-properties-common \
              libffi-dev \
              libpq-dev\
              gcc
      - name: Install uv
        uses: astral-sh/setup-uv@v2
      - name: 'Install dependencies'
        id: install_dependencies
        working-directory: ${{ github.workspace }}/src
        run: |
          uv pip install git+https://${{ secrets.SPORACLE_GITHUB_TOKEN }}@github.com/SPORTS-DDD/sporacle@v0.1.0