name: 'Generate Sporacle DB'

on:
  workflow_dispatch:
    

jobs:

  generate_sporacle_db:
    runs-on: ubuntu-latest
    steps:
      - name: 'Git Checkout'
        uses: actions/checkout@v4
      - name: 'Setup Python'
        uses: actions/setup-python@v5
        with:
          python-version: '3.12'
      - name: Install OS dependencies'
        run: |
          sudo apt-get -y update && sudo apt-get -y upgrade \
          && sudo apt-get -y install \
              software-properties-common \
              libffi-dev \
              libpq-dev\
              gcc
      - name: Install uv
        uses: astral-sh/setup-uv@v2
      - name: 'Install dependencies'
        id: install_dependencies
        run:
          uv pip install https://${{ secrets.SPORACLE_GITHUB_TOKEN }}@github.com/SPORTS-DDD/sporacle/releases/download/v0.1.0/sporacle-0.1.0-py3-none-any.whl